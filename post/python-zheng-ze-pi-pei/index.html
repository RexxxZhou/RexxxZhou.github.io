<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Python正则匹配 | Rexxxx&#39;s Blog</title>
<meta name="description" content="Life is a fucking movie, enjoy.">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://rexxxzhou.github.io/favicon.ico?v=1678621911113">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://rexxxzhou.github.io/styles/main.css">


<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://rexxxzhou.github.io">Rexxxx&#39;s Blog</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="/" class="menu">
                首页
              </a>
            
          </li>
        
          <li>
            
              <a href="/archives" class="menu">
                归档
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                标签
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/about" class="menu">
                关于
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>Python正则匹配</h1>
            <p class="article-meta">
              2022-08-28
              
                <a href="https://rexxxzhou.github.io/tag/hPjfg7vfX/" class="badge ">
                  python
                </a>
              
            </p>
            
            <div class="post-content" v-pre>
              <p>https://tool.oschina.net/regex/    在线正则匹配工具</p>
<p>使用自带的re库可实现正则</p>
<p>https://docs.python.org/zh-cn/3/library/re.html 库介绍</p>
<p>https://cloud.tencent.com/developer/article/1607481 简单用法</p>
<p>import re</p>
<pre><code class="language-javascript">match_pattern = re.compile(r'\'\s*type\s*\'\s*:\s*\'\s*phrase\s*\'')
string = &quot;'type':'phrase'&quot;
print(match_pattern.findall(string))
print(match_pattern.finditer(string))
print(match_pattern.search(string))
</code></pre>
<p>re.finditer(pattern, string, flags=0)</p>
<p>pattern 在 string 里所有的非重复匹配，返回为一个迭代器 iterator 保存了 匹配对象 。 string 从左到右扫描，匹配按顺序排列。空匹配也包含在结果里。</p>
<pre><code class="language-javascript">for idx,val in enumerate(re.finditer(string)):
    print(val)
</code></pre>
<p>finditer也是完全匹配整个正则表达式的</p>
<p>re.sub(pattern, repl, string, count=0, flags=0)</p>
<p>返回通过使用 repl 替换在 string 最左边非重叠出现的 pattern 而获得的字符串。 如果样式没有找到，则不加改变地返回 string。 repl 可以是字符串或函数；如为字符串，则其中任何反斜杠转义序列都会被处理。 也就是说，\n 会被转换为一个换行符，\r 会被转换为一个回车符，依此类推。 未知的 ASCII 字符转义序列保留在未来使用，会被当作错误来处理。 其他未知转义序列例如 &amp; 会保持原样。</p>
<pre><code class="language-javascript">print(re.sub(match_pattern,'',string))
print(match_pattern.sub('',string))
# 'type':'phrase' ==&gt; ''
</code></pre>
<p>要注意，python中的字符串是不可变对象，所以函数处理后是不会改变原对象的，需要赋值给某个变量才能拿到结果进一步处理</p>
<p>re.search(pattern, string, flags=0)</p>
<p>扫描整个 字符串 找到匹配样式的第一个位置，并返回一个相应的 匹配对象。如果没有匹配，就返回一个 None ； 注意这和找到一个零长度匹配是不同的。</p>
<p>search是整个正则表达式完整匹配，匹配到了就返回第一个找到的结果，匹配不到返回None</p>
<p>re.findall(pattern, string, flags=0)</p>
<p>Return all non-overlapping matches of pattern in string, as a list of strings or tuples. The string is scanned left-to-right, and matches are returned in the order found. Empty matches are included in the result.The result depends on the number of capturing groups in the pattern. If there are no groups, return a list of strings matching the whole pattern. If there is exactly one group, return a list of strings matching that group. If multiple groups are present, return a list of tuples of strings matching the groups. Non-capturing groups do not affect the form of the result.</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>re.findall(r'\bf[a-z]*', 'which foot or hand fell fastest')<br>
['foot', 'fell', 'fastest']<br>
re.findall(r'(\w+)=(\d+)', 'set width=20 and height=10')<br>
[('width', '20'), ('height', '10')]</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>findall，如果正则表达式中有小括号括起来的对，只要有多少对小括号组合，就对应有多少个分组，会用这些分组去匹配搜索字符串，如果有多个分组，那么搜索结果是一个多元组的列表，如果只有一个分组，那么结果就是一个字符串列表；总之不是完整匹配正则表达式，用法比较灵活</p>
<p>https://zhuanlan.zhihu.com/p/37900841</p>
<h2 id="正则匹配的一些规则">正则匹配的一些规则</h2>
<p>这里先收集一些常用的正则匹配符号，后续使用到继续补充</p>
<p>1、句号.</p>
<p>匹配除换行符以外的所有字符</p>
<p>2、\s  \S</p>
<p>\s表示匹配空白符，包括制表符、换行符、空格</p>
<p>\S表示匹配除空白符以外的字符，与\s刚好相反</p>
<p>3、\d \w</p>
<p>\d 匹配数字</p>
<p>\w 匹配字母、数字、下划线、汉字</p>
<p>\W 匹配任意不是字母、数字、下划线、汉字的字符</p>
<p>\D 匹配任意不是数字的字符</p>
<p>4、重复匹配</p>
<ul>
<li>表示匹配星号前的字符任意数量，0个或0个以上</li>
</ul>
<ul>
<li>表示匹配加号前的字符，1个或1个以上</li>
</ul>
<p>? 表示匹配0次或1次</p>
<p>{n} 表示前面的字符重复n次</p>
<p>{n,} 表示前面的字符重复n次或n次以上</p>
<p>{n,m} 表示前面的字符重复n-m次</p>
<p>*和+都是贪婪匹配，使用这种模式，会尽可能多的匹配到所有的字符，可以搭配?来使用非贪婪匹配，只要即最短的满足匹配规则的内容：</p>
<pre><code class="language-javascript">match_pattern=r'&lt;.*&gt;'
match_pattern2=r'&lt;.*?&gt;'
string='&lt;h1&gt;helloworld&lt;\h1&gt;'
// match_pattern 匹配到整个字符串
// match_pattern2 匹配到&lt;h1&gt;
</code></pre>
<p>5、中括号</p>
<p>中括号[]里的字符表示匹配其中任意一个就行</p>
<p>例如[a-z0-9]匹配字母a到z，数字0到9的字符，如果待匹配字符串包含这些字符中的一个就会被匹配到</p>
<p>6、反选 ^</p>
<p>[^a] 表示匹配a以外的所有字符</p>
<p>[^aeiou] 表示匹配aeiou以外的所有字符</p>
<p>7、分组 ()</p>
<p>用小括号括起来的内容是整体匹配的，例如(abc)就要求字符串必须包含abc子串才会被匹配</p>
<p>也可以做选择，通过|符号表示：</p>
<p>(abc|def)表示整体既可以匹配abc也可以匹配def</p>
<p>多个中括号代表多个捕获分组，re.findall就是查询所有匹配到的分组，每一个分组查到的结果会放在一个元组中，一个数组有多个元组，元组个数对应捕获分组数量</p>
<p>但用圆括号会有一个副作用，只会使相关的匹配会被缓存，例如下面的例子中，第一个案例只有123和456两个匹配结果，没有runoob的内容。；此时可用 ?: 放在第一个选项前来消除这种副作用。</p>
<p>()表示捕获分组，()会把每个分组里的匹配的值保存起来，使用$n(n是一个数字，表示第n个捕获组的内容)<br>
(?:)表示非捕获分组，和捕获分组唯一的区别在于，非捕获分组匹配的值不会保存起来</p>
<pre><code class="language-javascript">对比效果
string2='runoob123runoob456'
pattern=re.compile(r'runoob([0-9]+)')
res=pattern.findall(string2)
print(res)
// output
['123', '456']

string2='runoob123runoob456'
pattern=re.compile(r'runoob([?:0-9]+)')
res=pattern.findall(string2)
print(res)
// output
['runoob123', 'runoob456']
</code></pre>
<p>其中 ?: 是非捕获元之一，还有两个非捕获元是 ?= 和 ?!，这两个还有更多的含义，前者为正向预查，在任何开始匹配圆括号内的正则表达式模式的位置来匹配搜索字符串，后者为负向预查，在任何开始不匹配该正则表达式模式的位置来匹配搜索字符串</p>
<p>非捕获元：表示进行正则匹配的内容，但是返回结果的时候不会返回非捕获元匹配的内容</p>
<p>下面用了?=非捕获元，表示匹配数字的分组，但是不返回，所以匹配到的就是runoob</p>
<figure data-type="image" tabindex="1"><img src="https://s2.loli.net/2022/08/28/5CcGw3xEeXPNfSB.png" alt="" loading="lazy"></figure>
<pre><code class="language-javascript">string='runoob123runoob456'
pattern1=r'runoob(?=[0-9]+)' // 匹配结果 runoob runoob
pattern2=r'(?&lt;=[0-9]+)runoob' // 匹配结果 runoob 这是123runoob的runoob
string2='runoob123runoob-google'
pattern3=r'runoob(?![0-9]+)' // 匹配结果 runoob  这是runoob-google的runoob
pattern4=r'(?&lt;![0-9]+)runoob' //匹配结果 runoob 这是最前面的runoob
</code></pre>
<h3 id="有小于号的写在前面没有的写在后面">有小于号的写在前面，没有的写在后面</h3>
<h3 id="以下列出-的使用区别这几个都是不返回匹配的分组内容只返回分组意外的匹配内容而则是将分组和分组以外的匹配都返回">以下列出 ?=、?&lt;=、?!、?&lt;! 的使用区别（这几个都是不返回匹配的分组内容，只返回分组意外的匹配内容，而?:则是将分组和分组以外的匹配都返回）</h3>
<p>exp1(?=exp2)：查找 exp2 前面的 exp1。</p>
<figure data-type="image" tabindex="2"><img src="https://www.runoob.com/wp-content/uploads/2014/03/reg-111.jpg" alt="" loading="lazy"></figure>
<p>(?&lt;=exp2)exp1：查找 exp2 后面的 exp1。</p>
<figure data-type="image" tabindex="3"><img src="https://www.runoob.com/wp-content/uploads/2014/03/reg-222.jpg" alt="" loading="lazy"></figure>
<p>exp1(?!exp2)：查找后面不是 exp2 的 exp1。</p>
<figure data-type="image" tabindex="4"><img src="https://www.runoob.com/wp-content/uploads/2014/03/reg-333.jpg" alt="" loading="lazy"></figure>
<p>(?&lt;!exp2)exp1：查找前面不是 exp2 的 exp1。</p>
<figure data-type="image" tabindex="5"><img src="https://www.runoob.com/wp-content/uploads/2014/03/reg-444.jpg" alt="" loading="lazy"></figure>
<p>8、非打印字符</p>
<table>
<thead>
<tr>
<th>\cx</th>
<th>匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。</th>
</tr>
</thead>
<tbody>
<tr>
<td>\f</td>
<td>匹配一个换页符。等价于 \x0c 和 \cL。</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符。等价于 \x0a 和 \cJ。</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符。等价于 \x0d 和 \cM。</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符。等价于 \x09 和 \cI。</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td>
</tr>
</tbody>
</table>
<p>9、定位符</p>
<p>定位符一般用于匹配以什么开头或者以什么结尾的内容</p>
<table>
<thead>
<tr>
<th>^</th>
<th>匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</th>
</tr>
</thead>
<tbody>
<tr>
<td>$</td>
<td>匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词边界，即字与空格间的位置。</td>
</tr>
<tr>
<td>\B</td>
<td>非单词边界匹配。</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">string='hello world'
match_pattern=r'\bhel'
// 匹配结果 hel
match_pattern=r'llo\b'
// 匹配结果 llo
match_pattern=r'\Bell'
// 匹配结果 ell 如果string='ello' 则不会匹配
// \b可以理解成单词分界线 放前放后的意思就是在哪分界而已
// \B表示不在单词的分界线 所以ello不会被匹配到
</code></pre>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
            <div class="next-post">
              <div class="next">
                下一篇
              </div>
              <a href="https://rexxxzhou.github.io/post/protoc-gen-validator-sheng-cheng-xiao-yan-zhuang-dai-ma/">
                <h3 class="post-title">
                  protoc-gen-validator生成校验桩代码
                </h3>
              </a>
            </div>
          
        </div>
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://rexxxzhou.github.io/images/avatar.png?v=1678621911113" class="no-responsive avatar">
    <div class="text-muted">Life is a fucking movie, enjoy.</div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      最新文章
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/effectivego-bi-ji/">EffectiveGo笔记</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-wang-luo-kai-fa/">Go语言网络开发</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-shu-zu-yu-qie-pian/">Go语言数组与切片</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-lei-xing/">Go语言类型</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-kong-zhi-liu/">Go语言控制流</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-ji-chu-zhi-shi/">Go语言基础知识</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-han-shu/">Go语言函数</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-de-yi-xie-nei-zhi-han-shu/">Go语言的一些内置函数</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-cuo-wu-chu-li/">Go语言错误处理</a>
            </li>
          
        
          
            <li>
              <a href="https://rexxxzhou.github.io/post/go-yu-yan-bing-fa/">Go语言并发</a>
            </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      标签列表
    </div>
    <div class="row">
      
        <a href="https://rexxxzhou.github.io/tag/bzcKfnF8X/" class="badge ">
          Golang
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/Jnf5LaxTP/" class="badge warning">
          apue读书笔记
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/hPjfg7vfX/" class="badge warning">
          python
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/fOn--vI2w/" class="badge secondary">
          日常开发知识沉淀
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/ESBJ9vM7t/" class="badge secondary">
          apisix
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/R9r12TtWy/" class="badge warning">
          lua
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/MF20Z50u8/" class="badge success">
          git
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/e43sinOSt/" class="badge warning">
          MySQL
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/m7J2bceGd/" class="badge secondary">
          HTTP
        </a>
      
        <a href="https://rexxxzhou.github.io/tag/m3a3xDoDi/" class="badge secondary">
          ElasticSearch
        </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://rexxxzhou.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5746490084885111"
     crossorigin="anonymous"></script>




  </body>
</html>
